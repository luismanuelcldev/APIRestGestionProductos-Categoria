// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Configuro el generador del cliente de Prisma
generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

// Configuro la fuente de datos (SQLite)
datasource db {
  provider = "sqlite"
}

// Defino el modelo Producto
model Producto {
  id Int @id @default(autoincrement())
  nombre String @unique
  precio Int @default(999)
  fechaHoraReg DateTime @default(now())
  categoria Categoria @relation(fields: [categoriaId], references: [id])
  categoriaId Int
  stock Int @default(0)
}

// Defino el modelo Categoria
model Categoria {
  id Int @id @default(autoincrement())
  nombre String @unique
  productos Producto[]
}

// Defino el modelo Usuario
model Usuario {
  id Int @id @default(autoincrement())
  nombreUsuario String @unique
  email String @unique
  password String
  nombre String?
  apellido String?
  rol Rol @default(USUARIO)
  fechaRegistro DateTime @default(now())
  activo Boolean @default(true)
  ultimoAcceso DateTime?
}

// Defino el enum para los Roles
enum Rol {
  ADMINISTRADOR
  USUARIO
  CONSULTOR
}
